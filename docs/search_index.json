[
["index.html", "Births in Nigeria", " Births in Nigeria Using data from a survey conducted on births in Nigeria, we investigate infant mortality. The first task is to change the wide format data (where each row represents a mother, and columns indicate each of her children) to long format data (where each row represents a child, and columns can contain mother level data.) The complete data munging leaves the data in a long format, with each column of data in the appropriate factor or numeric format. A sample of some columns is shown below. caseid wealthindex bord lives_with gender 3 1 1 2 -1.42056 3 lives elsewhere female 10 1 2 2 -1.35903 6 respondent female 32 1 8 2 -0.97078 5 lives elsewhere female 234 3 14 3 -1.31134 1 lives elsewhere male 499 6 15 2 -0.93215 2 respondent female One of the questions of interest is the prevelance of infant mortality in the area. This indicator variable is calculated by finding the which observations have an age at death less than or equal to 12 months. This survey is a multilevel cluster sample, with the highest level of clustering at the town level. To delve in to the differences in infant mortality across clusters, we first look at the scatterplot of the infant mortality rate and the average wealth index in a town. We appear to see a negative correlation between the two variables, where towns with a high wealth index show a lower infant mortality rate. To look at the variation in average infant mortality between clusters across space, we plot the locations of each of the sampled towns, coloring points by their respective rates of infant mortality. It appears that the coastal regions tend to have lower infant mortality rates, with the inland regions more commonly showing high mortality rates. The high mortality areas seem to correspond to the areas with low per capita GDP. "],
["modeling-infant-mortality.html", "Modeling Infant Mortality", " Modeling Infant Mortality Running a regression on infant mortality, using only the wealth index as a predictor we get an intercept of -2.2479686, with a coefficient of -0.2872811 for the wealth index. The coefficient for the wealth index shows that there is a negative relationship between the two variables, higher wealth indicates lower infant mortality rates. The coefficient can be interpretated as the additive effect of the log of the odds for a unit increase in the wealth index. Causation cannot be inferred from this model. In order to look at the relationship between gender and wealth on infant mortality, we regress infant mortality against years of education, number of house members, family wealth index, age of mothers first birth, number of younger siblings, gender, and the interaction between gender and family wealth index. In this full model the coefficient for the interaction of interest has a p-value of 0.72, so we fail to reject the null that there is no relationship between the interaction and infant mortality. The best predictors appear to be motherâ€™s years of education, age of first birth, and the gender of the baby. ## Estimate Std. Error z value Pr(&gt;|z|) ## (Intercept) -1.49422561 0.143851167 -10.3873026 2.832504e-25 ## education -0.03923775 0.007702387 -5.0942322 3.501573e-07 ## housemem -0.01226998 0.006812333 -1.8011426 7.168040e-02 ## wealthindex -0.10100417 0.050141698 -2.0143748 4.397020e-02 ## agefirstbirth -0.03968046 0.006446394 -6.1554509 7.486420e-10 ## bord 0.03346630 0.011190563 2.9905823 2.784461e-03 ## gendermale 0.21672761 0.056287651 3.8503581 1.179452e-04 ## wealthindex:gendermale -0.03322916 0.058960691 -0.5635816 5.730389e-01 "],
["code.html", "Code", " Code #importing relevant libraries library(knitr) library(data.table) library(dplyr) library(ggplot2) library(ggmap) library(scales) #setting seed to ensure that randomized calculations are constant set.seed(50) #importing file, removing column of ids data = as.data.frame(fread(&quot;MotherData.csv&quot;, stringsAsFactors = TRUE)) #splitting data to mother related data and baby related data mothers = data[, c(1:78, 439:ncol(data))] babies = data[, c(1, 79:438)] #converting baby data to long format and renaming columns babies = reshape(babies, varying = names(babies[, -1]), sep = &quot;_&quot;, direction = &quot;long&quot;) babies = select(babies, caseid, bord, b0, b1, b2, b7, b9, b4) names(babies) = c(&quot;caseid&quot;, &quot;bord&quot;, &quot;twin&quot;, &quot;month&quot;, &quot;year&quot;, &quot;months_lived&quot;, &quot;lives_with&quot;, &quot;gender&quot;) #removing lines for mothers that didn&#39;t have a baby babies = babies[complete.cases(babies[, &quot;bord&quot;]), ] #creating dummy variable for babies who die before reaching one year babies$inf_death = as.numeric(babies$months_lived &lt; 13) #setting inf_death to 0 for babies that are still alive babies[is.na(babies$inf_death), &quot;inf_death&quot;] = 0 #selecting relevant mother data mothers = select(mothers, caseid, v005, v113, v116, v119, v120, v121, v122, v123, v124, v125, v127, v128, v129, v130, v131, v133, v135, v136, v137, v150, v151, v152, v153, v155, v161, v191, v201, v212) #renaming to help interpret results names(mothers) = c(&quot;caseid&quot;, &quot;samp_weight&quot;, &quot;water&quot;, &quot;toilet&quot;, &quot;electricity&quot;, &quot;radio&quot;, &quot;tv&quot;, &quot;fridge&quot;, &quot;bike&quot;, &quot;motorcycle&quot;, &quot;car&quot;, &quot;floor&quot;, &quot;walls&quot;, &quot;roof&quot;, &quot;religion&quot;, &quot;ethnicity&quot;, &quot;education&quot;, &quot;usual&quot;, &quot;housemem&quot;, &quot;housechild&quot;,&quot;reltohead&quot;, &quot;sexhead&quot;, &quot;agehead&quot;, &quot;teleph&quot;, &quot;literacy&quot;, &quot;cookingfuel&quot;, &quot;wealthindex&quot;, &quot;childrenborn&quot;, &quot;agefirstbirth&quot;) full = merge(mothers, babies) #removing 9 from rows that do not contain true 9&#39;s rows = full[, -c(2, 4, 20, 22, 23, 31, 32, 33, 35, 37)] rows[rows == &quot;9&quot;] = NA full[, -c(2, 4, 20, 22, 23, 31, 32, 33, 35, 37)] = rows #removing 99, 999 (NA codes) full[full == &quot;99&quot;] = NA full[full == &quot;999&quot;] = NA full[full == &quot;&quot;] = NA full = droplevels(full) #in binary variables, removing &quot;not a dejure resident&quot;, since there is a variable containing that information, #and it is redundant. Converting everything to binary where applicable #converting factors to characters so they are editable full[, c(5:11, 24)] &lt;- lapply(full[, c(5:11, 24)], as.character) full[full == &quot;no&quot;] = &quot;0&quot; full[full == &quot;yes&quot;] = &quot;1&quot; #converting characters to numeric full[, c(5:11, 24)] &lt;- lapply(full[, c(5:11, 24)], as.numeric) #use kable function to print head of dataset in a more appealing way kable(full[c(3, 10, 32, 234, 499), c(1, 27, 30, 35, 36)]) #chunk is pushed right by the html wrapper #getting the group id from the combined caseid full$location = sapply(strsplit(as.character(full$caseid), &quot;\\\\s+&quot;), `[`, 2) #aggregate data by location (aka town), and find the mean wealth index and mortality rate. means = full %&gt;% select(location, wealthindex, inf_death) %&gt;% group_by(location) %&gt;% summarise(wealthindex = mean(wealthindex),inf_death = mean(inf_death)) #scatterplot of mortality rate by wealth where each point is a town. ggplot(means) + geom_point(aes(x = wealthindex, y = inf_death)) + xlab(&quot;Wealth Index&quot;) + ylab(&quot;Infant Mortality Rate&quot;) + ggtitle(&quot; Wealth and Infant Mortality in Nigeria&quot;) #import lat long data loc = as.data.frame(fread(&quot;Locations.csv&quot;)) #merge with aggregated town level data loc = merge(loc, means, by.x = &quot;v001&quot;, by.y = &quot;location&quot;) #get the base map to overlay data on map = get_map(location = c(lon = 8.5, lat = 8.5), zoom = 6) #create map, color dots, and remove axes ggmap(map) + geom_point(aes(x = lon, y = lat, color = inf_death), size = 2, data = loc, alpha = .75) + scale_colour_gradient(low = muted(&quot;green&quot;), high = &quot;red&quot;, guide = &quot;colourbar&quot;) + labs(color = &quot;% Inf. Mortality&quot;) + theme(axis.title.x=element_blank(), axis.text.x=element_blank(), axis.ticks.x=element_blank(), axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank()) #model infant mortality using just wealth index m_wealth = glm(inf_death~wealthindex, data = full, family = binomial(link=&#39;logit&#39;)) #more comprehensive model on infant mortality. m_full = glm(inf_death~education+housemem+wealthindex+agefirstbirth+bord+gender+(gender*wealthindex), data = full, family = binomial(link=&#39;logit&#39;)) summary(m_full)$coefficients "]
]
